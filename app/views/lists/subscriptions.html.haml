- @title = 'Subscriptions'

.col-lg-7
  .panel.panel-info
    .panel-heading Subscriptions
    .panel-body
      %table.table
        %thead
          %tr 
            %th email
            %th
        %tbody
          - @list.subscriptions.each do |subscription|
            %tr
              %td{style: 'padding-right: 1.3em'}
                = link_to(subscription.email, subscription_path(subscription))

              %td{style: 'width: 100%;'}
                - if subscription.fingerprint.blank?
                  = link_to(edit_subscription_path(subscription)) do
                    %span.large.text-warning.glyphicon.glyphicon-barcode{title: "No key assigned!"}
                - elsif subscription.key.blank?
                  %span.large.text-warning.glyphicon.glyphicon-barcode{title: "Assigned key not in keyring!"}
                  %span
                    = link_to(list_keys_path(@list, anchor: 'upload'), title: 'Upload key', class: 'text-success') do
                      .large.glyphicon.glyphicon-upload
                - elsif subscription.key.trust_issues.present?
                  = link_to(list_key_path(@list, subscription.key.fingerprint)) do
                    %span.large.text-danger.glyphicon.glyphicon-barcode{title: "Key is #{subscription.key.trust_issues}"}

                - if subscription.admin?
                  .text-success.glyphicon.glyphicon-user{title: 'Is an admin of this list'}
                - if ! subscription.delivery_enabled?
                  .glyphicon.glyphicon-volume-off{title: 'Does not receive list-messages (delivery disabled)'}


.col.col-lg-7
  .pull-right
    = button_to(new_list_subscription_path(@list), method: :get, title: t(".new_subscription"), class: 'btn btn-success') do
      %span.glyphicon.glyphicon-plus
      = t(".new_subscription")
